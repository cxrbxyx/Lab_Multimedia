Contexto del Proyecto La aplicaci贸n, denominada "Gramola", es una plataforma multimedia dise帽ada para la gesti贸n de m煤sica en establecimientos (como bares). Actualmente, el sistema cuenta con una arquitectura separada compuesta por un backend en Spring Boot y un frontend en Angular. La funcionalidad base implementada incluye un flujo completo de autenticaci贸n y registro de usuarios, donde se recopilan credenciales espec铆ficas de Spotify (Client ID y Client Secret), y un sistema de activaci贸n de cuenta mediante pagos con Stripe. Adem谩s, existe una l贸gica de negocio previa desarrollada en Python para la conversi贸n de playlists entre servicios, que sirve como base conceptual para la integraci贸n multimedia.

Objetivos Previstos El objetivo principal es evolucionar la plataforma hacia un reproductor h铆brido funcional capaz de combinar la calidad de metadatos de Spotify con la capacidad de reproducci贸n de v铆deo de YouTube. Para lograrlo, se establecen las siguientes metas:

    Integraci贸n de Servicios: Implementar en el backend la comunicaci贸n con la API de Spotify para b煤squedas y obtenci贸n de metadatos, y con la API de YouTube para la resoluci贸n de v铆deos, migrando la l贸gica existente del script de Python a Java.

    Optimizaci贸n de Recursos: Desarrollar un sistema de cach茅 (base de datos o memoria) para almacenar la relaci贸n entre canciones de Spotify y v铆deos de YouTube, minimizando as铆 el consumo de cuota de la API de Data de YouTube.

    Reproducci贸n Multimedia: Habilitar en el frontend un reproductor capaz de recibir identificadores de v铆deo desde el backend tras una b煤squeda de audio, permitiendo al usuario una experiencia de usuario fluida donde busca m煤sica pero consume contenido audiovisual.


TODO:

 Fase 1: Backend - El Cerebro (Spotify) y el Coraz贸n (YouTube)

Objetivo: Que el backend sea capaz de hablar con Spotify para obtener datos y con YouTube para obtener video, actuando como intermediario.
1.1. Configuraci贸n de API Keys

    Acci贸n: A帽ade tu API Key de Google/YouTube en application.yaml.

    Por qu茅: El backend necesita su propia identidad para hablar con YouTube, independientemente del usuario.

    Archivo: backend/src/main/resources/application.yaml.

1.2. Crear SpotifyService.java

    Objetivo: Gestionar la comunicaci贸n con Spotify.

    Tareas:

        Crear un m茅todo getClientCredentialsToken(String clientId, String clientSecret) que obtenga el token de acceso temporal de Spotify.

        Crear un m茅todo searchTracks(String query, String token) que llame a la API de Spotify y devuelva una lista de canciones (t铆tulo, artista, uri, imagen).

    Referencia: Usar谩s los campos clientId y clientSecret que ya tienes en tu entidad User.java.

1.3. Crear YouTubeService.java (Portando tu Python)

    Objetivo: Encontrar el video correspondiente a una canci贸n.

    Tareas:

        Portar l贸gica: Adapta la funci贸n search_youtube_video de tu script spotify_youtube_solution.py a Java usando la librer铆a google-api-client o simplemente RestTemplate.

        Implementar Cach茅: Crucial. Crea una entidad VideoCache (o usa un Map en memoria para empezar) para guardar "Nombre Canci贸n + Artista" -> "YouTube Video ID".

        L贸gica: Antes de llamar a la API de YouTube, el servicio debe mirar si ya tiene el ID en la cach茅.

1.4. Crear MusicController.java

    Objetivo: Exponer estos servicios al Frontend.

    Endpoints:

        GET /api/music/search?q={query}:

            Recupera el usuario autenticado.

            Llama a SpotifyService usando las credenciales del usuario.

            Devuelve JSON con resultados de Spotify.

        GET /api/music/play?track={nombre}&artist={artista}:

            Llama a YouTubeService.

            Devuelve el videoId.

 Fase 2: Frontend - La Interfaz (B煤squeda)

Objetivo: Que el usuario pueda buscar canciones y ver resultados visuales de Spotify.
2.1. Actualizar MusicService.ts

    Acci贸n: Conectar el servicio de Angular a los nuevos endpoints de Spring Boot.

    Cambio: Modificar frontend/src/app/services/music-service.ts para apuntar a tu backend (localhost:8080) en lugar del mock (localhost:3000) y asegurarse de que env铆a el token de autenticaci贸n (JWT) en las cabeceras.

2.2. Implementar Componente Search

    Archivos: frontend/src/app/dashboard/components/search/search.ts y .html.

    Tareas:

        Crear un formulario de b煤squeda.

        Al enviar, llamar a musicService.searchTracks().

        Renderizar los resultados en una lista o cuadr铆cula (usando las im谩genes de las car谩tulas que devuelve Spotify).

 Fase 3: Frontend - La Reproducci贸n (Player)

Objetivo: Reproducir el video de YouTube cuando se selecciona una canci贸n de Spotify.
3.1. Integrar Reproductor de YouTube

    Archivos: frontend/src/app/dashboard/components/player/player.ts y .html.

    Opci贸n A (R谩pida): Usar el paquete @angular/youtube-player.

    Opci贸n B (Nativa): Usar un <iframe> est谩ndar de YouTube y controlar su src din谩micamente.

    L贸gica: El componente debe tener una variable currentVideoId.

3.2. Comunicaci贸n entre Componentes

    Desaf铆o: El componente Search (donde haces clic) y Player (donde se reproduce) est谩n separados.

    Soluci贸n: Usar un servicio compartido (PlayerService) o Signals de Angular.

        Usuario clic en canci贸n en Search.

        Search llama a musicService.getVideoId(trackName, artistName).

        Al recibir el ID, Search actualiza el estado global "Canci贸n Actual".

        El componente Player detecta el cambio y actualiza el video.

 Fase 4: Pulido y Protecci贸n

Objetivo: Asegurar que la aplicaci贸n sea robusta.
4.1. Gesti贸n de Cuotas (Backend)

    Aseg煤rate de que tu cach茅 en YouTubeService funciona. Si 5 usuarios buscan "Despacito", la API de YouTube solo debe llamarse 1 vez.

4.2. Manejo de Errores (Frontend)

    驴Qu茅 pasa si el usuario puso credenciales de Spotify incorrectas al registrarse? (Tu c贸digo actual no valida esto en el registro, solo la contrase帽a).

    A帽adir un mensaje en el Dashboard si la b煤squeda falla ("Revisa tus credenciales de Spotify").

4.3. Estilos

    Mejorar el CSS de track-list y player para que se vea como una app de m煤sica real.